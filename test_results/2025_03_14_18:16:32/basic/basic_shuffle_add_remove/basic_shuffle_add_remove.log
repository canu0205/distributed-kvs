Logs for test basic_shuffle_add_remove

> SPAWN CLUSTER
spawning cluster of 3 nodes
$ docker network create kvs_0_net_base
  starting container kvs_0_node_0 (ext_port=9000)
$ docker run -d --name kvs_0_node_0 --env NODE_IDENTIFIER=0 -p 9000:8081 kvstore-hw3-test
    attaching container kvs_0_node_0 to base network
$ docker network connect kvs_0_net_base kvs_0_node_0
    inspecting container kvs_0_node_0
    container kvs_0_node_0 spawned, base_net_ip=192.168.97.2
  starting container kvs_0_node_1 (ext_port=9001)
$ docker run -d --name kvs_0_node_1 --env NODE_IDENTIFIER=1 -p 9001:8081 kvstore-hw3-test
    attaching container kvs_0_node_1 to base network
$ docker network connect kvs_0_net_base kvs_0_node_1
    inspecting container kvs_0_node_1
    container kvs_0_node_1 spawned, base_net_ip=192.168.97.3
  starting container kvs_0_node_2 (ext_port=9002)
$ docker run -d --name kvs_0_node_2 --env NODE_IDENTIFIER=2 -p 9002:8081 kvstore-hw3-test
    attaching container kvs_0_node_2 to base network
$ docker network connect kvs_0_net_base kvs_0_node_2
    inspecting container kvs_0_node_2
    container kvs_0_node_2 spawned, base_net_ip=192.168.97.4
waiting for nodes to come online...
  node kvs_0_node_0 online
  node kvs_0_node_1 online
node kvs_0_node_2 is not online: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
  node kvs_0_node_2 online
all nodes online
  - node 0 is up: OK
  - node 1 is up: OK
  - node 2 is up: OK

> SEND VIEW: {'shard1': [{'address': '192.168.97.2:8081', 'id': 0}], 'shard2': [{'address': '192.168.97.3:8081', 'id': 1}]}
view sent to node 0: 200 OK
view sent to node 1: 200 OK
view sent to node 2: 200 OK
Putting key 0

 client req_id:0 > 0 > kvs.put key0 <- 0
 client req_id:0 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}}}
Putting key 1

 client req_id:1 > 1 > kvs.put key1 <- 1
 client req_id:1 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}}}
Putting key 2

 client req_id:2 > 0 > kvs.put key2 <- 2
 client req_id:2 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}}}
Putting key 3

 client req_id:3 > 1 > kvs.put key3 <- 3
 client req_id:3 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}}}
Putting key 4

 client req_id:4 > 0 > kvs.put key4 <- 4
 client req_id:4 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}}}
Putting key 5

 client req_id:5 > 1 > kvs.put key5 <- 5
 client req_id:5 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}}}
Putting key 6

 client req_id:6 > 0 > kvs.put key6 <- 6
 client req_id:6 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}}}
Putting key 7

 client req_id:7 > 1 > kvs.put key7 <- 7
 client req_id:7 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}}}
Putting key 8

 client req_id:8 > 0 > kvs.put key8 <- 8
 client req_id:8 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}}}
Putting key 9

 client req_id:9 > 1 > kvs.put key9 <- 9
 client req_id:9 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}}}
Putting key 10

 client req_id:10 > 0 > kvs.put key10 <- 10
 client req_id:10 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}, 'key10': {'1': 1}}}
Putting key 11

 client req_id:11 > 1 > kvs.put key11 <- 11
 client req_id:11 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}, 'key10': {'1': 1}, 'key11': {'1': 1}}}
Putting key 12

 client req_id:12 > 0 > kvs.put key12 <- 12
 client req_id:12 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}, 'key12': {'0': 1}}}
Putting key 13

 client req_id:13 > 1 > kvs.put key13 <- 13
 client req_id:13 {'message': 'Key store successfully', 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}, 'key10': {'1': 1}, 'key11': {'1': 1}, 'key13': {'1': 1}}}
Putting key 14

 client req_id:14 > 0 > kvs.put key14 <- 14
 client req_id:14 {'message': 'Key store successfully', 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}, 'key12': {'0': 1}, 'key14': {'0': 1}}}
 client req_id:15 > 0> kvs.get_all request "causal-metadata": {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}, 'key12': {'0': 1}, 'key14': {'0': 1}}
 client req_id:15 > 0> kvs.get_all -> {'items': {'key1': '1', 'key4': '4', 'key6': '6', 'key8': '8', 'key12': '12', 'key14': '14'}, 'causal-metadata': {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}, 'key12': {'0': 1}, 'key14': {'0': 1}}}
 client req_id:16 > 1> kvs.get_all request "causal-metadata": {'key1': {'0': 1}, 'key4': {'0': 1}, 'key6': {'0': 1}, 'key8': {'0': 1}, 'key12': {'0': 1}, 'key14': {'0': 1}}
 client req_id:16 > 1> kvs.get_all -> {'items': {'key0': '0', 'key2': '2', 'key3': '3', 'key5': '5', 'key7': '7', 'key9': '9', 'key10': '10', 'key11': '11', 'key13': '13'}, 'causal-metadata': {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}, 'key10': {'1': 1}, 'key11': {'1': 1}, 'key13': {'1': 1}}}
Shard 1 keys: {'key1': '1', 'key4': '4', 'key6': '6', 'key8': '8', 'key12': '12', 'key14': '14'}

Shard 2 keys: {'key0': '0', 'key2': '2', 'key3': '3', 'key5': '5', 'key7': '7', 'key9': '9', 'key10': '10', 'key11': '11', 'key13': '13'}

Adding 3rd shard


> SEND VIEW: {'shard1': [{'address': '192.168.97.2:8081', 'id': 0}], 'shard2': [{'address': '192.168.97.3:8081', 'id': 1}], 'shard3': [{'address': '192.168.97.4:8081', 'id': 2}]}
view sent to node 0: 200 OK
view sent to node 1: 200 OK
view sent to node 2: 200 OK
 client req_id:17 > 0> kvs.get_all request "causal-metadata": {'key0': {'1': 1}, 'key2': {'1': 1}, 'key3': {'1': 1}, 'key5': {'1': 1}, 'key7': {'1': 1}, 'key9': {'1': 1}, 'key10': {'1': 1}, 'key11': {'1': 1}, 'key13': {'1': 1}}
 client req_id:17 > 0> kvs.get_all -> {'items': {'key13': '13'}, 'causal-metadata': {'key13': {'1': 1}}}
Shard 1 keys: {'key13': '13'}

 client req_id:18 > 1> kvs.get_all request "causal-metadata": {'key13': {'1': 1}}
 client req_id:18 > 1> kvs.get_all -> {'items': {}, 'causal-metadata': {}}
Shard 2 keys: {}

 client req_id:19 > 2> kvs.get_all request "causal-metadata": {}
 client req_id:19 > 2> kvs.get_all -> {'items': {}, 'causal-metadata': {}}
Shard 3 keys: {}

dumping logs of kvs containers
Dumping logs for container kvs_0_node_2 to file /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_2.log
Successfully wrote logs for container kvs_0_node_2 to /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_2.log
Dumping logs for container kvs_0_node_1 to file /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_1.log
Successfully wrote logs for container kvs_0_node_1 to /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_1.log
Dumping logs for container kvs_0_node_0 to file /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_0.log
Successfully wrote logs for container kvs_0_node_0 to /Users/chanwoopark/dev/ucsc/cse138/cse138_assignment4/test_results/2025_03_14_18:16:32/basic/basic_shuffle_add_remove/kvs_0_node_0.log

> DESTROY CLUSTER
cleaning up group 0
  cleaning up group containers
removing containers ['kvs_0_node_2', 'kvs_0_node_1', 'kvs_0_node_0']
  cleaning up group networks
removing network kvs_0_net_base


âœ— FAILED basic_shuffle_add_remove: FAIL: expected 15 keys, got 1
